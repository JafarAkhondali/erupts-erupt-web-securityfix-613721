<div *ngIf="eruptBuildModel!=null">
    <nz-spin [nzSpinning]="loading">
        <erupt-edit-type #eruptEdit [eruptBuildModel]="eruptBuildModel" [mode]="behavior=='add'?'addNew':null"></erupt-edit-type>
    </nz-spin>
    <nz-tabset *ngIf="eruptBuildModel.tabErupts">
        <ng-container *ngFor="let item of eruptBuildModel.tabErupts | keyvalue">
            <nz-tab [nzTitle]="eruptFieldModelMap.get(item.key).eruptFieldJson.edit.title">
                <ng-container [ngSwitch]="eruptFieldModelMap.get(item.key).eruptFieldJson.edit.type">
                    <ng-container *ngSwitchCase="editType.TAB_TABLE_ADD">
                        <tab-table [tabErupt]="{eruptBuildModel:item.value,eruptFieldModel:eruptFieldModelMap.get(item.key)}"
                                   [eruptBuildModel]="eruptBuildModel" [behavior]="behavior"></tab-table>
                    </ng-container>
                    <ng-container *ngSwitchCase="editType.TAB_TABLE_REFER">
                        <ng-container *ngIf="eruptBuildModel.eruptModel.eruptJson.power.add">
                            <tab-table [tabErupt]="{eruptBuildModel:item.value,eruptFieldModel:eruptFieldModelMap.get(item.key)}"
                                       [eruptBuildModel]="eruptBuildModel" [behavior]="behavior" mode="refer-add">

                            </tab-table>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngSwitchCase="editType.TAB_TREE">
                        <nz-input-group [nzSuffix]="suffixIcon" class="mb-sm" style="width: 100%;">
                            <input type="text" nz-input placeholder="Search"
                                   [(ngModel)]="eruptFieldModelMap.get(item.key).eruptFieldJson.edit.$tempValue">
                        </nz-input-group>
                        <ng-template #suffixIcon>
                            <i nz-icon nzType="search"></i>
                        </ng-template>
                        <br>
                        <nz-tree [nzCheckable]="true"
                                 [nzShowLine]="true"
                                 [nzCheckStrictly]="true"
                                 [nzData]="eruptFieldModelMap.get(item.key).eruptFieldJson.edit.$tabTreeViewData"
                                 (nzCheckBoxChange)="checkBoxChange($event,eruptFieldModelMap.get(item.key))"
                                 [nzSearchValue]="eruptFieldModelMap.get(item.key).eruptFieldJson.edit.$tempValue"
                                 [nzCheckedKeys]="eruptFieldModelMap.get(item.key).eruptFieldJson.edit.$value">
                        </nz-tree>
                    </ng-container>
                </ng-container>
            </nz-tab>
        </ng-container>
    </nz-tabset>
</div>
