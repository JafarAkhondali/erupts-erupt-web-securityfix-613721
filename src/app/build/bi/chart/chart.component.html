<nz-spin [nzSpinning]="chart.loading">
    <nz-card [nzTitle]="chart.name" nzSize="small" [nzBodyStyle]="{padding:'0'}" [nzHoverable]="true"
             [nzExtra]="extraTemplate">
        <ng-container *ngIf="!ready">
            <div [id]='chart.code'
                 style='width:100%;display: flex;flex-direction: column;align-items:center;justify-content: center;'
                 [ngStyle]="{height:chart.height+'px'}">
                <i nz-icon nzType="pie-chart" nzTheme="twotone" style="font-size: 36px"></i>
            </div>
        </ng-container>
        <ng-container *ngIf="ready" [ngSwitch]="chart.type">
            <ng-container *ngSwitchCase="chartType.tpl">
                <erupt-iframe [url]="src" [style]="{height:chart.height+'px',paddingTop:'1px'}"></erupt-iframe>
            </ng-container>
            <ng-container *ngSwitchCase="chartType.table">
                <div [ngStyle]="{height:chart.height+'px'}" style="overflow: auto">
                    <app-chart-table [data]="data"></app-chart-table>
                </div>
            </ng-container>
            <ng-container *ngSwitchDefault>
                <div [id]='chart.code' style='width:100%;' [ngStyle]="{height:chart.height+'px'}"></div>
            </ng-container>
        </ng-container>
    </nz-card>
    <ng-template #extraTemplate>
        <i nz-icon nzType="reload" (click)="update(true)"></i>
        <ng-container *ngIf="plot">
            <nz-divider nzType="vertical"></nz-divider>
            <i nz-icon nzType="download" (click)="downloadChart()"></i>
        </ng-container>
    </ng-template>
</nz-spin>
