<page-header [autoTitle]="false" [title]="null"></page-header>
<nz-skeleton [nzActive]="true" [nzTitle]="true" [nzParagraph]="{ rows: 10 }" *ngIf="!bi"></nz-skeleton>
<ng-container *ngIf="bi">
    <ng-container *ngIf="bi.dimensions.length>0">
        <button nz-button class="mb-sm" (click)="query()">
            <i nz-icon nzType="search" nzTheme="outline"></i>查询
        </button>
    </ng-container>
    <ng-container *ngIf="bi.export">
        <button nz-button class="mb-sm">
            <i nz-icon nzType="download" nzTheme="outline"></i>导出
        </button>
    </ng-container>
    <!--  style="background: #fafafa;margin-bottom: 0;box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.2)"  -->
    <nz-card *ngIf="bi.dimensions.length>0" [nzHoverable]="true" style="margin-bottom:8px"
             [hidden]="false" nzSize="small">
        <dimension [bi]="bi">

        </dimension>
    </nz-card>
    <ng-container *ngIf="bi.charts.length>0">
        <div nz-row nzGutter="16">
            <ng-container *ngFor="let chart of bi.charts">
                <div nz-col [nzMd]="24/chart.grid" [nzXs]="24">
                    <nz-card [nzTitle]="chart.name" nzSize="small"
                             [nzBodyStyle]="{padding:'12px'}"
                             [nzHoverable]="true" [nzLoading]="chart.loading">
                        <bi-chart [chart]="chart" [biCode]="bi.code"></bi-chart>
                    </nz-card>
                </div>
            </ng-container>
        </div>
    </ng-container>

    <ng-container *ngIf="haveNotNull">
        <nz-card [nzHoverable]="true" [nzBordered]="true">
            <nz-result [nzIcon]="'thunderbolt'" [nzTitle]="'输入查询条件，开始查询操作'">
                <div nz-result-extra>
                    <button nz-button nzType="primary" class="mb-sm" (click)="query()">
                        <i nz-icon nzType="search" nzTheme="outline"></i>查询
                    </button>
                </div>
            </nz-result>
        </nz-card>
    </ng-container>
    <ng-container *ngIf="!haveNotNull">
        <st *ngIf="columns&&columns.length>0" [columns]="columns" [data]="data"
            [loading]="querying"
            [page]="{placement:'center'}"
            [scroll]="{x: (clientWidth > 768 ? columns.length * 150 : 0) + 'px'}"
            [bordered]="true"
            [size]="'small'">
        </st>
    </ng-container>
    <!--    <div style="height: 50px">-->

    <!--    </div>-->
</ng-container>
