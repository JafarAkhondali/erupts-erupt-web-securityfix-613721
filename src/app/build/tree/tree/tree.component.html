<page-header></page-header>
<div nz-row [nzGutter]="24" *ngIf="eruptModel">
    <div nz-col [nzXs]="24" [nzSm]="8" [nzMd]="8" [nzLg]="8">
        <button nz-button nzType="dashed" nzBlock (click)="addBlock()" style="margin-bottom: 10px"
                *ngIf="eruptModel.eruptJson.power.add">
            <i nz-icon type="plus" theme="outline"></i>
        </button>
        <nz-input-group [nzSuffix]="suffixIcon" class="mb-sm" style="width: 100%;">
            <input type="text" nz-input placeholder="Search" [(ngModel)]="searchValue">
        </nz-input-group>
        <ng-template #suffixIcon>
            <i nz-icon type="search"></i>
        </ng-template>
        <br>
        <nz-card [nzBodyStyle]="{padding:'10px',height:ww-310+'px',overflow: 'scroll'}">
            <nz-tree #tree
                     nzDraggable
                     class="tree-container"
                     [nzShowLine]="false"
                     [nzData]="nodes"
                     [nzBeforeDrop]="beforeDrop"
                     [nzSearchValue]="searchValue"
                     (nzClick)="nodeClickEvent($event)"
                     (nzDblClick)="nzDblClick($event)"
                     (nzContextMenu)="nzContextMenu($event)"
                     (nzExpandChange)="nzEvent($event)"
                     (nzSearchValueChange)="nzEvent($event)">
            </nz-tree>
        </nz-card>
    </div>

    <div nz-col class="mb-sm" [nzXs]="24" [nzSm]="16" [nzMd]="16" [nzLg]="16" [hidden]="!showEdit">
        <div nz-row class="mb-sm">
            <div nz-col [nzXs]="24">
                <span [hidden]="!selectLeaf">
                    <button nz-button (click)="save()" [disabled]="loading" *ngIf="eruptModel.eruptJson.power.edit">
                        <i nz-icon type="save" theme="outline"></i>保存
                    </button>
                    <button nz-button nzType="danger" (click)="del()" [disabled]="loading"
                            *ngIf="eruptModel.eruptJson.power.delete">
                        <i nz-icon type="delete" theme="outline"></i>删除
                    </button>
                </span>
                <span [hidden]="selectLeaf">
                    <button nz-button (click)="add()" [disabled]="loading" *ngIf="eruptModel.eruptJson.power.add">
                        <i nz-icon type="plus" theme="outline"></i>增加
                    </button>
                </span>
                <button class="float-right" nz-button nzType="danger" nzGhost
                        (click)="showEdit=false" [disabled]="loading"
                        *ngIf="showEdit">
                    <i nz-icon type="close" theme="outline"></i>
                </button>
            </div>
        </div>
        <div [ngStyle]="{height: ww-268+'px',overflow: 'scroll'}">
            <nz-spin [nzSpinning]="loading" nzSize="large">
                <nz-card style="margin-bottom: 0;">
                    <div style="background: #fff;padding: 10px">
                        <ng-container *ngIf="eruptModel">
                            <erupt-edit-type [eruptModel]="eruptModel" [col]="{xs: 24, sm: 24, md: 24, lg:12,xl: 8}">

                            </erupt-edit-type>
                        </ng-container>
                        <ng-container *ngIf="!eruptModel">
                            <nz-skeleton [nzActive]="true"></nz-skeleton>
                        </ng-container>
                    </div>
                </nz-card>
            </nz-spin>
        </div>
    </div>
</div>